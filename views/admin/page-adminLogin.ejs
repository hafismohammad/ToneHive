<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="../public/style.css">
</head>
<body>
     <!--Body-->               
     <form id="logForm" class="border p-5" style="max-width:600px; margin:auto; margin-top: 200px; margin-bottom: 50px;" method="post" action="/admin/adminLogin">
        <% if(locals.error){ %>
            <div id="error" class="text-center">
                <p class="mt-15 err text-danger"><%= locals.error %></p>
            </div>
            <% } %>
        <h2 class="d-flex justify-content-center py-5">Admin Login</h2>
        
        <div class="mb-3">

            <input type="email" class="form-control" name="email" id="email" placeholder="Email address"
                aria-describedby="emailHelp">
        </div>
        <p><div id="error1" style="display: none;" class="mt-15 err text-danger"></div></p>

        <div class="mb-3">
            <input type="password" class="form-control" name="password" id="password" placeholder="Password">
        </div>
        <p><div id="error2" style="display: none;" class="mt-15 err text-danger"></div></p>

      
        <div class="mt-3 d-flex justify-content-center">
            <button type="submit" class="btn  btn-primary btn-block btn-secondary mt-3">LOGIN</button>
        </div>
     
    </form>
</div>


<script>
    const queryError = document.getElementById('error')

   setTimeout(() => {
     queryError.style.display = 'none'
   }, 3000);
</script>

<script>
    const error = document.getElementById('error')

    setTimeout(() => {
        error.style.display = 'none'
    }, 3000);
</script>

<script>
    const emailid = document.getElementById('email')
    const passwordid = document.getElementById('password')
    const error1 = document.getElementById('error1')
    const error2 = document.getElementById('error2')
    const formid = document.getElementById('logForm')

    function emailValidation(e) {
    const emailVal = emailid.value;
    const emailPattrn = /^([a-zA-Z0-9._-]+)@([a-zA-Z.-]+).([a-zA-z]{2,4})$/ 
    if(!emailPattrn.test(emailVal))
    {
        error1.style.display = "block";
        error1.innerHTML = "Please enter valid email address";

        setTimeout(() => {
            error1.style.display = "none";
            error1.innerHTML = "";
        }, 3000);
        return false
    }else
    {
        error1.style.display = "none";
        error1.innerHTML = "";
    }
   return true
}

function passwordValidate(e) {
    const passwordVal = passwordid.value;
    const alpha =  /[a-zA-Z]/
    const digit = /\d/
    if(passwordVal.length < 8)
    {
        error2.style.display = "block";
        error2.innerHTML = "Must enter at least 8 characters";

        setTimeout(() => {
            error2.style.display = "none";
            error2.innerHTML = "";
        }, 3000);
        return false

    }else if(!alpha.test(passwordVal) || !digit.test(passwordVal))
    {
        error2.style.display = "block"
        error2.innerHTML = "Should contain number and alphabets !!"

        setTimeout(() => {
            error2.style.display = "none";
            error2.innerHTML = "";
        }, 3000);
        return false

    }else {
        error2.style.display = "none";
        error2.innerHTML = ""
    }
    return true
}

emailid.addEventListener("blur", emailValidation)
passwordid.addEventListener("blur", passwordValidate)


formid.addEventListener("submit", function(e) {
  
   const valemail= emailValidation()
  const valpassword=  passwordValidate()
    if(!valemail || !valpassword ) {

     e.preventDefault()
    }
 })
   

</script>

<!--footer-->
</body>
</html>


